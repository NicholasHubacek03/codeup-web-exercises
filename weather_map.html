<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>First Mapbox Map</title>
    <!-- Mapbox JS -->
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js'></script>
    <script src="js/jquery-3.6.4.js"></script>
    <script src="js/keys.js"></script>
    <!-- Mapbox CSS -->
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css' rel='stylesheet' />    <style>
    #map {
        /* the width and height may be set to any size */
        width: 100%;
        height: 400px;
    }
</style>
</head>
<body>

<!-- The HTML element that serves as the Mapbox container -->
<div id='map'></div>
<div id="forecast-container"></div>
<div id="day-of-week"></div>
<!-- Custom JS -->
<script>
    mapboxgl.accessToken = "pk.eyJ1IjoibmljaG9sYXMtaHViYWNlazAzIiwiYSI6ImNsZzEwdDU3NDEwMHkzcm9obXV4eHAwa2gifQ.gnKpQnhwJd18ch_1c-k7VQ";
    var map = new mapboxgl.Map({
        container: 'map', // container ID
        style: 'mapbox://styles/mapbox/streets-v11', // style URL
        zoom: 10, // starting zoom
        center: [-96.7970, 32.7767] // [lng, lat]


    });

    $(document).ready(function() {
        // Replace "YOUR_CITY" and "YOUR_API_KEY" with your own values
        let city = "Fort Worth";
        let apiKey = "749cb928e0c0fad9f937dc8c65ad0ca4";

        // Make an AJAX request to the OpenWeatherMap API
        $.ajax({
            url: "https://api.openweathermap.org/data/2.5/forecast",
            data: {
                q: city,
                appid: apiKey,
                units: "imperial"
            },
            success: function(response) {
                let forecast = response.list.slice(0,3);
                let html = "<h2>5 Day Forecast for " + city + "</h2>";

                forecast.forEach(function(data) {
                    let date = new Date(data.dt_txt);
                    let dayOfWeek = date.toLocaleDateString("en-US", { weekday: "long" });
                    let temperature = data.main.temp;
                    let description = data.weather[0].description;

                    html += "<div class='weather-item'>";
                    html += "<p class='day-of-week'>" + dayOfWeek + "</p>";
                    html += "<p class='temperature'>" + temperature + " &deg;F</p>";
                    html += "<p class='description'>" + description + "</p>";
                    html += "</div>";
                });

                $("#forecast-container").html(html);
            },
            error: function(jqXHR, textStatus, errorThrown) {
                $("#forecast-container").html("<p>Error: " + errorThrown + "</p>");
            }
        });
    });

</script>
</body>
</html>
